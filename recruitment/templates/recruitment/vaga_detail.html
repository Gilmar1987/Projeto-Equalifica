{% extends 'base.html' %}
{% block title %}{{ vaga.titulo|truncatechars:30 }}{% endblock %}

{% block content %}
<div class="d-flex flex-column h-100">
  <h5 class="mb-1">{{ vaga.titulo|truncatechars:50 }}</h5>
  <small class="text-muted mb-2">{{ vaga.cnpj_empresa }}</small>

  <div class="small mb-2">
    <strong>Requisitos:</strong> {{ vaga.requisitos|truncatewords:15 }}
  </div>

  {% if user.is_authenticated and user.user_type == 'pcd' %}
    {% if ja_candidatado %}
      <div class="alert alert-success small p-2 mb-2">✅ Candidatura enviada</div>
    {% else %}
      <form method="post" action="{% url 'candidatar' vaga.id %}" class="mt-auto">
        {% csrf_token %}
        <button type="submit" class="btn btn-success w-100">Candidatar-se</button>
      </form>
    {% endif %}
  {% endif %}

  <div class="mt-auto">
    <a href="{% url 'vagas_list' %}" class="btn btn-outline-secondary w-100">← Vagas</a>
    <div style="margin-top: 20px;">
        <a href="/pcd/dashboard/" style="background-color: #6c757d; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px;">Voltar ao Dashboard</a>
    </div>
  </div>
</div>
{% endblock %}